---
title: "Python: ç”»åƒã®ä¸€è‡´åº¦åˆã‚’æ¯”è¼ƒã™ã‚‹"
emoji: "ğŸ"
type: "tech"
topics: ["python", "opencv", "ç”»åƒèªè­˜"]
published: true
---

Python ã§ï¼’ã¤ã®ç”»åƒã®æ¯”è¼ƒçµæœã‚’å–å¾—ã—ãŸã„ã“ã¨ãŒã‚ã£ãŸã®ã§ã€å‚™å¿˜éŒ²ã¨ã—ã¦æ®‹ã—ã¦ãŠãã¾ã™ã€‚

## ä½¿ç”¨ã™ã‚‹ç”»åƒ

![](https://storage.googleapis.com/zenn-user-upload/1a0ad5dce341-20211218.png)

## å®Œå…¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‹ã‚’åˆ¤å®šã™ã‚‹

```py
import cv2
import numpy as np

# å…ƒç”»åƒ
img_original = cv2.imread("after1.png")

# æ¯”è¼ƒå¯¾è±¡ç”»åƒï¼‘æšç›®(åŒã˜ç”»åƒ)
img_comparison1 = cv2.imread("after1.png")

# æ¯”è¼ƒå¯¾è±¡ç”»åƒï¼’æšç›®(é•ã†ç”»åƒ)
img_comparison2 = cv2.imread("after3.png")

# ç”»åƒãŒå®Œå…¨ä¸€è‡´ã™ã‚‹ã‹ã‚’åˆ¤å®šã™ã‚‹
print(np.array_equal(img_original, img_comparison1))
print(np.array_equal(img_original, img_comparison2))
```

çµæœ

```
True
False
```

np.array_equal é–¢æ•°ã¯ã€2 ã¤ã® ndarray ãŒä¸€è‡´ã—ã¦ã„ã‚‹ã‹ã‚’åˆ¤å®šã™ã‚‹é–¢æ•°ã§ã™ã€‚
ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦ã€å¼•æ•°ã«æ¯”è¼ƒã—ãŸã„ç”»åƒã‚’æŒ‡å®šã™ã‚‹äº‹ã§ã€å®Œå…¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‹ã‚’åˆ¤å®šã™ã‚‹äº‹ãŒã§ãã¾ã™ã€‚

```py
np.array_equal(img_to_np1, img_to_np2)
```

## ä¸€è‡´åº¦åˆã„ã‚’å–å¾—ã™ã‚‹

```py
import cv2
import numpy as np

# ç”»åƒã‚’æ¯”è¼ƒã—ã€ä¸€è‡´ã—ã¦ã„ãªã„ç®‡æ‰€ã‚’è¡¨ç¤ºã™ã‚‹
# å…ƒç”»åƒ
img_original = cv2.imread("after1.png")

# æ¯”è¼ƒå¯¾è±¡ç”»åƒï¼‘æšç›®(åŒã˜ç”»åƒ)
img_comparison1 = cv2.imread("after1.png")

# æ¯”è¼ƒå¯¾è±¡ç”»åƒï¼’æšç›®(é•ã†ç”»åƒ)
img_comparison2 = cv2.imread("after3.png")

# ç”»ç´ ãŒã©ã®ãã‚‰ã„ä¸€è‡´ã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹
print(np.count_nonzero(img_original == img_comparison1))
print(np.count_nonzero(img_original == img_comparison2))
```

çµæœ

```
39,000
156
```

èª¬æ˜
np.count_nonzero é–¢æ•°ã¯ã€å¼•æ•°ã«æ¡ä»¶ã‚’æŒ‡å®šã™ã‚‹äº‹ã§æ¡ä»¶ã«ä¸€è‡´ã—ã¦ã„ã‚‹å€‹æ•°ã‚’å–å¾—ã§ãã‚‹é–¢æ•°ã§ã™ã€‚
ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦ã€å¼•æ•°ã«

```
ç”»åƒï¼‘ == ç”»åƒï¼’
```

ã¨æŒ‡å®šã™ã‚‹äº‹ã§ã€ä¸€è‡´ã—ã¦ã„ã‚‹ç”»ç´ æ•°ã‚’å–å¾—ã§ãã¾ã™ã€‚
æˆ»ã‚Šå€¤ã¯ã€ä¸€è‡´ã—ã¦ã„ã‚‹å€‹æ•°ã§ã™ã€‚

```py
np.count_nonzero(ç”»åƒï¼‘ == ç”»åƒï¼’)
```
